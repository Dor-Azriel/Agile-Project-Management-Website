pipeline {
    def installed = fileExists 'bin/activate'
    stages {
    if (!installed) {
        stage("Install Python Virtual Enviroment") {
         sh 'virtualenv --no-site-packages .'
        }
    }
    stage ("Get Latest Code") {
    checkout scm
    }
    stage('Install Application Dependencies') {
            sh '''
        source bin/activate
        pip install -r requirements.txt
        deactivate
       '''
        }
    }
}